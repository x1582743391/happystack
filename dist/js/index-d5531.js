(()=>{"use strict";var t,n={612:(t,n,e)=>{t.exports=e.p+"assets/canon.mp3"},198:(t,n,e)=>{t.exports=e.p+"assets/down.mp3"},580:(t,n,e)=>{t.exports=e.p+"assets/great.mp3"},323:(t,n,e)=>{var o=e(194);function i(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}var r,a,s,p,c,l,u,d,f=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;i(this,t),this.x=n,this.y=e,this.z=o},v=function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"x";i(this,t),this.x=n,this.y=e,this.z=o,this.color="#ffffff",this.dir=r},h=e(212),y=(r=parseInt("f12711",16),a=parseInt("f5af19",16),s=parseInt((a-r)/1e4+""),p=0,function(){return"#"+Number(p++%1e4*s+r).toString(16)});function w(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.3,o=arguments.length>3?arguments[3]:void 0,i=Math.random()+"",r=document.createElement("audio");r.id=i,r.src=t,r.loop=n,r.volume=e,r.preload="auto",r.autoplay=!0,r.addEventListener("ended",(function(){"function"==typeof o&&o.call(this)})),document.body.appendChild(r),r.play()}function g(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}var b=new h.Pa4(0,4,0),m=0,x=document.querySelector("#webgl-output"),O=document.querySelector("#mask"),j=document.querySelector("#score"),S=document.querySelector(".btn"),C=document.querySelector("#gg"),z=0;x.addEventListener("mousedown",(function(t){1==(t=t||window.event).buttons&&c.stop()}),!1),O.addEventListener("mousedown",(function(t){if(1==(t=t||window.event).buttons&&0==m++){w(e(612),!0,.8);var n=new f(0,0,0),o=new v(3,1,3,"z");E(n,o),O.style.display="none"}}),!1),S.addEventListener("mousedown",(function(t){1==(t=t||window.event).buttons&&(C.style.display="none",location.reload())}),!1);var M,k,E=(M=!1,k=[],function(t,n){n.color=y(),0==k.length&&k.push(q(t,n)),t.y=k[k.length-1].position.y+n.y;var i=0;M?(t.x=10,n.dir="x",i=-10):(t.z=-10,i=10,n.dir="z");var r=q(t,n),a=Math.abs(t[n.dir]-i)/.0064;!function(t,n,e,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4500;c=new o.kX(t).to(g({},e,r),a),i=i||function(){},c.onComplete((function(){T()})).onUpdate((function(){n.position[e]=t[e]})).onStop((function(){i()})),c.start()}(t,r,n.dir,(function(){var i=function(t,n,o){var i=n.dir,r=o[o.length-2].position,a=n[i]/2,s=t[i]-r[i];if(s<0&&(a=-a),Math.abs(s)<.15){w(e(580),!1,1,(function(){document.body.removeChild(this)}));var p=o[o.length-1];return p.position[n.dir]=r[n.dir],[new f(p.position.x,p.position.y,p.position.z),n]}if(l.remove(o.pop()),Math.abs(s)>=n[i])return!1;w(e(198),!1,1,(function(){document.body.removeChild(this)}));var c=Object.assign({},t),u=t[i]+r[i];c[i]=u/2;var d=Object.assign({},n);d[i]=n[i]-Math.abs(s);var v=q(c,d);o.push(v);var h=Object.assign({},t);h[i]=u/2+a;var y=Object.assign({},n);y[i]=Math.abs(s);var g=q(h,y),b=Object.assign({},t);return b[i]=u/2-a,b.y-=n.y,L(y,g,s,b),[c,d]}(t,n,k);if(0!=i){if(E.apply(null,i),k[k.length-1].position.y-b.y>0){var r={y:0},s=u.position.y,p=b.y,c=d.position.y;new o.kX(r).to({y:n.y},a/4).onUpdate((function(){u.position.y=s+r.y,b.y=p+r.y,d.position.y=c+r.y,u.lookAt(b)})).start()}z++,j.textContent=z+"分"}else T()}),i,a),k.push(r),M=!M});function P(t,n){var e=new h.DvJ(n.x,n.y,n.z),o=new h.YBo({color:n.color||"000000"}),i=new h.Kj0(e,o);return i.position.set(t.x,t.y,t.z),i.castShadow=!0,i}function q(t,n){var e=P(t,n);return l.add(e),e}var A,I,F,L=(A=[[],[]],I=[[],[]],F=function t(n,e,i,r){var a=i>0?0:1,s=("x"==n.dir?A:I)[a],p=n.dir;r=null!=r?r:s.length-1;var c=s[r],u={y:e.position.y},d=c?c.position.y+n.y:0,v=Math.abs(u.y-d)/.0054,y=new o.kX(u).to({y:d},v);y.onComplete((function(){if(0!=s.length){if(c){var o=function(t){var n=new h.Pa4;return(new h.ZzF).setFromObject(t).getSize(n),n}(c),a=e.position[p],u=c.position[p];if(i<0&&(a*=-1,u*=-1),a+n[p]/2<=u+o[p]/2)s[r+1]&&s.splice(r+1,1),s.splice(r+1,0,e);else if(Math.abs(e.position[p]-c.position[p])==n[p]+o[p])t(n,e,i,r-1);else{l.remove(e);var d=Object.assign({},n);d[p]=o[p];var v=new f(e.position.x,c.position.y+n.y,e.position.z);v[p]=c.position[p];var y=q(v,d);s[r+1]&&s.splice(r+1,1),s.splice(r+1,0,y);var w=i>0?1:-1,g=c.position[p],b=e.position[p],m=o[p],x=n[p],O=w*(b-g)+(x-m)/2,j=(g+b)/2+w*(m+x)/4,S=Object.assign({},n);S[p]=O;var C=new f(e.position.x,e.position.y,e.position.z);C[p]=j;var z=q(C,S);t(S,z,i,r-1)}}}else s.push(e)})).onUpdate((function(){e.position.y=u.y})),y.start()},function(t,n,e,o){var i=Object.assign({},t);i.color="yellow";var r=P(o,i);!function(t,n,e){("x"==t?A:I)[n>0?1:0].push(e)}(t.dir,e,r),F(t,n,e)});function T(){document.querySelector("#ggtext").textContent="最后得分："+z,C.style.display="flex"}window.focus();var B=new h.xsS,U=new h.cPb(10,window.innerWidth/window.innerHeight,.1,1e3),X=new h.CP7;X.setClearColor(new h.Ilk("0xffffff")),X.setClearAlpha(.1),X.setSize(window.innerWidth,window.innerHeight),X.shadowMap.enabled=!0,U.position.set(-60,50,60),U.lookAt(new h.Pa4(0,4,0));var $=new h.Mig(3487029);B.add($);var H=new h.PMe(16777215);H.position.set(-10,20,-5),H.castShadow=!0,B.add(H),function(t,n,e){l=t,u=n,d=e}(B,U,H),document.getElementById("webgl-output").appendChild(X.domElement),function t(){requestAnimationFrame(t),o.ZP.update(),X.render(B,U),U.updateMatrix(),H.updateMatrix()}(),e(198),e(612),e(580)}},e={};function o(t){var i=e[t];if(void 0!==i)return i.exports;var r=e[t]={exports:{}};return n[t](r,r.exports,o),r.exports}o.m=n,t=[],o.O=(n,e,i,r)=>{if(!e){var a=1/0;for(c=0;c<t.length;c++){for(var[e,i,r]=t[c],s=!0,p=0;p<e.length;p++)(!1&r||a>=r)&&Object.keys(o.O).every((t=>o.O[t](e[p])))?e.splice(p--,1):(s=!1,r<a&&(a=r));s&&(t.splice(c--,1),n=i())}return n}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[e,i,r]},o.d=(t,n)=>{for(var e in n)o.o(n,e)&&!o.o(t,e)&&Object.defineProperty(t,e,{enumerable:!0,get:n[e]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{var t;o.g.importScripts&&(t=o.g.location+"");var n=o.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var e=n.getElementsByTagName("script");e.length&&(t=e[e.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t+"../"})(),(()=>{var t={826:0};o.O.j=n=>0===t[n];var n=(n,e)=>{var i,r,[a,s,p]=e,c=0;for(i in s)o.o(s,i)&&(o.m[i]=s[i]);for(p&&p(o),n&&n(e);c<a.length;c++)r=a[c],o.o(t,r)&&t[r]&&t[r][0](),t[a[c]]=0;o.O()},e=self.webpackChunkpilehappy=self.webpackChunkpilehappy||[];e.forEach(n.bind(null,0)),e.push=n.bind(null,e.push.bind(e))})();var i=o.O(void 0,[287],(()=>o(323)));i=o.O(i)})();